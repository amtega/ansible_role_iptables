---
# Role default lower priority variables

# Default path to config files
iptables_config_dest: /etc/sysconfig/iptables-config
iptables_rules_dest: /etc/sysconfig/iptables-rules
iptables_save_dest: /etc/sysconfig/iptables
logrotate_config_fw_dest: /etc/logrotate.d/firewall
rsyslog_config_fw_dest: /etc/rsyslog.d/firewall.conf

# Variables to fill iptables-config template

iptables_config_modules: "\"\""
iptables_config_save_on_stop: "\"yes\""
iptables_config_save_on_restart: "\"no\""

# Variables to fill iptables-rules template

#Define services and ports open for every firewall zone
open_services_SERVICE:
  - service_name: ssh
    src_net:
    multiple: no
    ports: 22

open_services_MANAGEMENT:
  - service_name: ssh
    src_net:
    multiple: no
    ports: 22

open_services_MONITORING:
  - service_name: checkMK
    src_net: "10.0.0.0/24"
    multiple: no
    ports: 6556

open_services_BACKUP:
  - service_name: Bacula
    src_net:
    multiple: no
    ports: 9101

  - service_name: Tivoli Storage Manager
    src_net:
    multiple: yes
    ports: 1500:1501,1552:1553,1581

# Reserve variables to define custom input rules for every firewall zone
# Include variable for general INPUT rules which applies before jump to zone
custom_INPUT_rules:
custom_INPUT_SERVICE_rules:
custom_INPUT_MANAGEMENT_rules:
custom_INPUT_MONITORING_rules:
custom_INPUT_BACKUP_rules:
custom_INPUT_NAS_rules:
custom_INPUT_SAN_rules:
custom_INPUT_LOG_rules:

# Define firewall zones to jump with associated interfaces and services
iptables_zones:
  - name: SERVICE
    interfaces:
      - service-01
    open_services: "{{ open_services_SERVICE }}"

  - name: MANAGEMENT
    interfaces:
      - mgmt-01
    open_services: "{{ open_services_MANAGEMENT }}"

  - name: MONITORING
    interfaces:
      - monitor-01
    open_services: "{{ open_services_MONITORING }}"

  - name: BACKUP
    interfaces:
      - backup-01
    open_services: "{{ open_services_BACKUP }}"

  - name: NAS
    interfaces:
      - nas-01
    open_services: []

  - name: SAN
    interfaces:
      - san-01
    open_services: []
