---
# Role default lower priority variables

# List of dicts with the firewall zones
#
# {
#   name: <name of the zone>
#   interfaces:
#     - <interface name 1>
#     - <interface name N>
# }
#
# Sample:
#
# {
#   name: SERVICE
#   interfaces:
#     - eth0
#     - eth1
# }

iptables_zones:
  - name: SERVICE
    interfaces:
      - service-01

  - name: BACKUP
    interfaces:
      - backup-01

# List of dicts with the open services
#
# {
#   name: <name of the zone>
#   source:
#
# }
# FIXME

iptables_services:
  - name: ssh
    source:
    multiple: no
    ports: 22
    zones: SERVICE

  - name: backup
    source:
    multiple: yes
    ports:
      - 1500:1501
      - 1552:1553
      - 1581
    zones:
      - SERVICE
      - BACKUP

# Save (and restore) rule and chain counter

iptables_config_save_counter: no

# Numeric status output

iptables_config_status_numeric: yes

# Verbose status output

iptables_config_status_verbose: no

# Status output with numbered lines

iptables_config_status_line_numbers: yes

# Paths to config files

iptables_config_path: /etc/sysconfig/iptables-config
iptables_rules_path: /etc/sysconfig/iptables-rules
iptables_save_path: /etc/sysconfig/iptables
iptables_log_path: /var/log/iptables.log
iptables_rsyslog_config_path: /etc/rsyslog.d/iptables.conf
iptables_logrotate_config_path: /etc/logrotate.d/firewall

# Logrotate configuration

iptables_config_logrotate: |
      weekly
      compress
      dateext
      maxage 365
      notifempty
      sharedscripts
      postrotate
          /bin/kill -HUP $(cat /var/run/syslogd.pid 2> /dev/null) 2> /dev/null || true
      endscript

# Reserve variables to define custom input rules for every firewall zone
# Include variable for general INPUT rules which applies before jump to zone
custom_INPUT_rules:
custom_INPUT_SERVICE_rules:
custom_INPUT_MANAGEMENT_rules:
custom_INPUT_MONITORING_rules:
custom_INPUT_BACKUP_rules:
custom_INPUT_NAS_rules:
custom_INPUT_SAN_rules:
custom_INPUT_LOG_rules:




# Proxy settings

iptables_http_proxy: >-
  {{ ansible_facts.env.http_proxy | default('') }}
iptables_https_proxy: >-
  {{ ansible_facts.env.https_proxy | default('') }}
iptables_no_proxy: >-
  {{ ansible_facts.env.no_proxy | default('') }}
